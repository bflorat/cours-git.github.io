<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
                <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
     <meta name="description"
        content="Feuille de travaux pratiques génie logiciel Licence Pro 2021-2022, la gestion de versions">
	<meta name="author" content="Bertrand Florat">

    <title>Feuille de travaux pratiques - Gestion de version</title>

    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/moon.css" id="theme">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
    <link rel="stylesheet" href="css/custom.css" id="custom">
	</head>

	<body>

<body>

    <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">

            <section>
                <h2 style="text-align: lcenter;">Feuille de travaux pratiques - Gestion de version</h2>
                <p>IUT de Nantes – Département Informatique</p>
                <p>LINA - Laboratoire d’Informatique de Nantes Atlantique</p>
                <p>
                    <b>Cours de Licence professionnelle 2021-2022</b>
                </p>
                <div style="font-size:0.5em">
                    <p style="text-align: center;">Copyright (C) 2012-2021 Bertrand Florat (<a href='http://www.florat.net/contact'>contact</a>), licence <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA V4</a></p>
                    <p>
                        <a 
                            href="https://cours-git.florat.net/tp.html">https://cours-git.florat.net/tp.html</a>
                            /                            
                        <a href='index.html'>Cours</a>
                    </p>                    
                </div>
            </section>
            <section>
                <h5>Notes importantes</h5>
                <ul>
                    <li>Le travail se fera en binôme. Les étudiants se grouperont en binômes
                        <span class='lcode'>altXY</span>. Chaque binôme est doté d'un dépôt Git dédié. 'A' et 'B'
                        désignent respectivement l'un
                        et l'autre membre du binôme. Si un étudiant est seul, il devra simuler A et B dans deux consoles
                        différentes et avec deux utilisateurs différents, ex :
                        <span class='lcode'>alt12a</span> et
                        <span class='lcode'>alt12b</span>.</li>
                    <li>On utilise souvent Git depuis un IDE. Il vous est ici demandé de n'utiliser que la ligne de commande
                    </li>
                    <li>Inutile d'écrire du vrai code Java pour les exemples</li>
                    <li>Pour répondre aux questions du TP, écrivez dans un fichier
                        <span class='lcode'>~/tp[no TP].txt</span> (un seul étudiant du binôme)</li>
                    <li>Tous les exercices se feront sous Gnu/Linux avec vi comme éditeur de texte.

                        <p class="note">
                            Commandes de base de vim :
                            <span class='lcode'>:i</span> insérer,
                            <span class='lcode'>:o</span> insérer à la ligne,
                            <span class='lcode'>:q!</span>
                            quitter sans enregistrer,
                            <span class='lcode'>:x</span> quitter en enregistrant,
                            <span class='lcode'>shift J</span> (ligne n) : remonte la ligne n+1,
                            <span class='lcode'>y</span> : copier,
                            <span class='lcode'>p</span> : coller,
                            <span class='lcode'>dd</span> : supprimer toute une ligne,
                            <span class='lcode'>u</span> : undo . Voir [6] au besoin.
                        </p>
                    </li>
                </ul>
                <br />
            </section>

            <section>
                <h4>TP1 Motivations gestion de configuration</h4>
                <p>
                    <i>Echanges en séance</i>
                </p>
            </section>

            <section>
                <h4>TP2: Exercice concepts Git</h4>
                <ul>
                    <li>Aller sur
                        <a
                            href='http://pcottle.github.io/learnGitBranching/?NODEMO'>http://pcottle.github.io/learnGitBranching/?NODEMO</a>
                    </li>
                    <li>
                        <i>Commandes utiles :
                            <span class='lcode'>undo</span>,
                            <span class='lcode'>reset</span>,
                            <span class='lcode'>show commands</span>
                        </i>
                    </li>
                    <li>Créer une branche
                        <span class='lcode'>develop</span> et y faire un commit</li>
                    <li>Fusionner ce commit dans la branche
                        <span class='lcode'>main</span>
                    </li>
                    <li>Poser un tag
                        <span class='lcode'>1.0.0</span> sur la branche main</li>
                    <li>Depuis la branche
                        <span class='lcode'>main</span>, créer une branche
                        <span class='lcode'>1.0</span>, y faire deux commits, tagger ce dernier commit
                        <span class='lcode'>1.0.1</span>
                    </li>
                    <li>Faire deux commits sur develop</li>
                    <li>Fusionner ces deux commits dans la branche
                        <span class='lcode'>main</span> puis tagger
                        <span class='lcode'>2.0.0</span>
                    </li>
                    <li>Créer depuis
                        <span class='lcode'>develop</span> une branche
                        <span class='lcode'>bug123</span>, y faire un commit puis fusionner le commit dans la branche
                        <span class='lcode'>develop</span>
                    </li>
                    <li>Supprimer la branche bug123</li>
                    <li>Fusionner develop dans main puis tagger
                        <span class='lcode'>2.0.1</span>
                    </li>
                    <p>Se connecter <a href="https://cours.florat.net">au serveur</a>, copier les commandes effectuées dans le 
                        simulateur et les coller dans un fichier (selectionner les commandes en laissant CTRL appuyé puis faire CTRL-C)
                        <span class='lcode'>~/tp2.txt</span> (merci de respecter le nom du fichier)</p>
                </ul>
            </section>

            <section>
                <h4>TP3 Commandes Git de base</h4>
                <p>Se connecter
                    <a href="https://cours.florat.net">au serveur</a> (client ssh en javascript)</p>
                <ul>
                    <li>User: votre login (exemple :
                        <span class='lcode'>alt04a</span>,
                        <span class='lcode'>alt10b</span>)</li>
                    <li>Password : fourni par l'enseignant</li>
                </ul>
            </section>
            <section>
                <h5>Exercice 3.1 : Clonage d'un dépot</h5>
                <p>Chaque binôme dispose d'un dépôt Git (local) et situé à l'URL (remplacer
                    <span class='lcode'>code_binôme</span> par votre code binôme ):</p>
                <pre>
/var/cours/depots_git/<i>[code_binome]</i>/my-app.git</pre>

                <p class="note">En condition rééelle, les URL sont en <span class='lcode'></span>https://...</span>. 
                    Pour des raisons pratiques, nous utilisons ici une URL locale (sur le même serveur) mais qui reste tout à fait valide.
                <ul>
                    <li>Les étudiant(e)s A et B clonent dans leur $HOME le dépôt distant affecté au binôme</li>
                    <li>Afficher les branches avec
                        <span class='lcode'>git branch -a</span>
                    </li>
                    <li>Consultez votre répertoire
                        <span class='lcode'>.git</span> (commande:
                        <span class='lcode'>find .git</span>). A quoi sert son contenu &nbsp?</li>
                </ul>
            </section>
            <section>
                <h5>Exercice 3.2 : Commit d'une modification</h5>
                <p class="note">Cet exercice se fait simultanément par A et B</p>
                <ol>
                    <li>Configurer correctement son nom et e-mail Git (voir support de cours)</li>
                    <li>Forcez vim comme éditeur de Git : <br/>
                        <span class='lcode'>git config --global core.editor "vim"</span></li>
                    <li>Créez quelques alias, au moins <span class='lcode'>ci</span> pour commit et <span class='lcode'>st</span> pour status</li>
                    <li>Vérifier que vous vous trouvez dans la branche
                        <span class='lcode'>master</span>, s'y positionner si ce n'est pas le cas.
                    </li>
                    <li>Modifier le source
                        <span class='lcode'>Calcul.java</span>
                        et ajouter un fichier source
                        <span class='lcode'>CalculAlternatif.java</span>
                        dans le même package
                    </li>
                    <li>Afficher le statut de la copie locale à ce stade</li>
                    <li>Commiter <u>en un seul commit</u> cette modification et cet ajout de nouveau fichier en
                        utilisant un message de commit dans les règles de l'art.</li>
                    <li>Afficher le commit dans l'historique et les différences qu'il a introduites (commande
                        <span class='lcode'>git show</span>).</li>
                </ol>
            </section>
            <section>
                <h5>Exercice 3.3.1 : Merge fast-forward</h5>
                <p class="note">Cet exercice se fait simultanément par A et B</p>
                <ol>
                    <li>Créer une branche nommée
                        <span class='lcode'>bug42</span> et s'y positionner
                    </li>
                    <li>Effectuer des modifications sur
                        <span class='lcode'>Calcul.java</span> et les commiter
                    </li>
                    <li>Positionnez vous dans la branche
                        <span class='lcode'>master</span>
                    </li>
                    <li>Fusionner (par merge) les modifications de la branche
                        <span class='lcode'>bug42</span> dans la branche master. Comment git qualifie ce type de merge ?
                    </li>
                    <li>Supprimer cette branche</li>

                </ol>
            </section>
            <section>
                <h5>Exercice 3.3.2 : Merge non fast-forward</h5>
                <p class="note">Cet exercice se fait simultanément par A et B. Le but des modifications 
                    de cet exercice est de ne pas créer de conflit.</p>
                <ol>
                    <li>Créer une branche nommée
                        <span class='lcode'>bug43</span> et s'y positionner
                    </li>
                    <li>Effectuer des modifications
                        <b>au début</b> du fichier
                        <span class='lcode'>Calcul.java</span> et les commiter
                    </li>
                    <li>Positionnez vous dans la branche
                        <span class='lcode'>master</span>
                    </li>
                    <li>Effectuer des modifications
                        <b>à la fin</b> du fichier
                        <span class='lcode'>Calcul.java</span> et les commiter
                    </li>
                    <li>Fusionner (par merge) les modifications de la branche
                        <span class='lcode'>bug43</span> dans la branche master. Comment git qualifie ce type de merge ?
                    </li>
                    <li>Supprimer cette branche</li>
                </ol>
            </section>
            <section>
                <h5>Exercice 3.4 : Gestion d'un conflit</h5>
                <p class="note">Cet exercice se fait simultanément par A et B</p>
                <ol>
                    <li>Créer une branche nommée
                        <span class='lcode'>bug44</span> et s'y positionner
                    </li>
                    <li>Effectuer des modifications dans le fichier
                        <span class='lcode'>Calcul.java</span> et les commiter
                    </li>
                    <li>Positionnez vous dans la branche
                        <span class='lcode'>master</span>
                    </li>
                    <li>Effectuer des modifications (differentes)
                        <b>sur les mêmes lignes</b> du fichier
                        <span class='lcode'>Calcul.java</span> et les commiter
                    </li>
                    <li>Fusionner (par merge) les modifications de la branche
                        <span class='lcode'>bug44</span> dans la branche master. Que se produit-il ?</li>
                    <li>Ouvrir le fichier, que remarquez vous à l'emplacement des modifications ?</li>
                    <li>Afficher le statut de la copie locale.</li>
                    <li>Resoudre le problème en ne gardant que les modifications de la branche
                        <span class='lcode'>master</span>
                    </li>
                    <li>Supprimer cette branche</li>
                </ol>
            </section>

            <section>
                <h5>Exercice 3.5 : Manipulation des branches distantes</h5>
                <ol>
                    <li>
                        <b>L'étudiant(e) A sauvegarde ses exercices précedents par la commande :
                            <span class='lcode'>mv ~/my-app ~/my-app~</span> </b>
                    </li>
                    <li>L'étudiant(e) A réinitialise son dépot en le clonnant à nouveau (il refait l'ex 3.1). 
                        Attention : se positionner dans $HOME avant de cloner.</li>
                    <li>Les étudiant(e)s A et B affichent le détail du dépôt
                        <span class='lcode'>origin</span>
                        et des branches remote via les commandes suivantes :
                        <pre>$ git branch -r
$ git remote show origin</pre>
                    </li>
                    <li>L'étudiant(e) B pousse ses commits des exercices précédents dans la branche
                        <span class='lcode'>origin/master</span>
                    </li>
                    <li>L'étudiant(e) A compare sa branche
                        <span class='lcode'>master</span> à la branche
                        <span class='lcode'>origin/master</span>. Il y-a-t-il des différences? Pourquoi ?
                        Que faut-il faire pour voir les modifications des autres dans sa branche remote
                        <span class='lcode'>origin/master</span>?
                    </li>
                    <li>L'étudiant(e) A intégre les modifications distantes via
                        <span class='lcode'>pull</span>.
                    </li>
                    <li>L'étudiant(e) A fait des modifications puis les commit dans sa branche
                        <span class='lcode'>master</span> puis le pousse vers son origin</span>
                    </li>


                    <p>Ceci est une clarification, hop hop</p>

                </ol>
            </section>

            <section>
                <h5>Exercice du soir no 1 (concepts)</h5>
                <p>A faire avant le prochain cours ;</p>
                <p>Exercice individuel ;</p>
                <p>
                    <b>Faire <a href="soir1.html">ce QCM</a></b>
                </p>
                <p>Laisser le texte sur le serveur
                    <a href="https://cours.florat.net">https://cours.florat.net</a>
                    dans le fichier
                    <span class='lcode'>~/soir1.txt</span>
                </p>
                <p>(merci de respecter le nom du fichier)</p>
            </section>

            <section>
                <h4>TP4 Utilitaires Git</h4>
                <p class="note">Cet exercice se fait simultanément par A et B</p>
                <h5>Exercice 4.1 : Ignorer des fichiers</h5>
                <ol>
                    <li>Créer un fichier (fictif)
                        <span class='lcode'>.class</span>
                        dans
                        <span class='lcode'>src/main/java/com/mycompany/app</span>
                    </li>
                    <li>Configurer git pour qu'il ignore recurvivement tous les
                        <span class='lcode'>.class</span>
                    </li>
                    <li>Utiliser
                        <span class='lcode'>git status</span> pour vérifier l'opération avant et après
                    </li>
                    <li>Commiter et pousser le fichier
                        <span class='lcode'>.gitignore</span> pour que le reste de l'équipe en profite
                    </li>
                </ol>
            </section>
            <section>
                <h5>Exercice 4.2 : Réécrire son historique</h5>
                <p class="note">Cet exercice se fait simultanément par A et B. 
                    Notez les commandes effectuées dans le fichier tp4.txt</p>
                <ol>
                    <li>Effectuez trois commits</li>
                    <li>Renommez le dernier commit</li>
                    <li>Fusionnez le premier et le second</li>
                </ol>
            </section>
            <section>
                <h5>Exercice 4.3 : Rechercher une expression</h5>
                <p class="note">Cet exercice se fait simultanément par A et B. 
                    Notez les commandes effectuées dans le fichier tp4.txt</p>
                Recherchez une expression de votre choix dans les différentes révisions du dépôt
                (Voir commande dans le cours, page "Historique")
                
                
            </section>
            <section>
                <h5>Exercice 4.4 : Utilisation de git-flow</h5>
                <p class="note">Cet exercice se fait simultanément par A et B. 
                    Notez les commandes effectuées dans le fichier tp4.txt</p>
                <ol>
                    <li>Initialiser git-flow sur votre dépôt local</li>
                    <li>Créer une branche de fonctionnalité et y faire un commit</li>
                    <li>Finaliser la branche de fonctionnalité</li>
                    <li>Démarrer une release et y faire un commit, la publier</li>
                    <li>Finaliser la release en version 1.0.0</li>
                    <li>Créer, faire un commit puis fermer une branche hotfix</li>
                    <li>Créer une branche de maintenance 1.x</li>
                </ol>
                <p>Aide:</p>
                <pre>
                  git flow init
                  git flow feature [start|finish|publish|pull] panierachat
                  git flow release [start|finish|publish|pull] 1.2.0
                  git flow hotfix [start|finish|publish|pull] bug123</pre>
				
            </section>
            <section>
                <h5>Exercice du soir no 2 (Git)</h5>
                <p>Attentation: c'est un travail individuel à faire par chaque étudiant</p>
                <ul>
                    <li>Aller sur
                        <a
                            href='http://pcottle.github.io/learnGitBranching/?NODEMO'>http://pcottle.github.io/learnGitBranching/?NODEMO</a>
                    </li>
                    <li>Créer une branche
                        <span class='lcode'>develop</span> et y faire un commit</li>
                    <li>Créer une branche
                        <span class='lcode'>evol1</span> depuis
                        <span class='lcode'>develop</span> et y faire deux commits</li>
                    <li>Créer une branche
                        <span class='lcode'>evol2</span> depuis
                        <span class='lcode'>develop</span> et y faire deux commits</li>
                    <li>Dans la branche
                        <span class='lcode'>develop</span>, ne récupérer que le premier commit de la branche
                        <span class='lcode'>evol1</span>
                    </li>
                    <li>Dans la branche
                        <span class='lcode'>develop</span>, récupérer les deux commits de la branche
                        <span class='lcode'>evol2</span> mais en les inversant</li>
                    <li>Poser un tag
                        <spanclass='lcode'>1.0.0</span> sur la branche develop</li>
                </ul>
                <p>Pour vérification, résultat correct <a href='images/soir2_resu.png'>ici</a></p>
                <p>Copier les commandes effectuées dans le simulateur et les coller dans un fichier
                    <span class='lcode'>~/soir2.txt</span> (merci de respecter le nom du fichier)</p>
                <p>Note : en cas de difficulté, faire les exercices d'entrainement à
                    <a href='http://pcottle.github.io/learnGitBranching'>http://pcottle.github.io/learnGitBranching</a>
                </p>
            </section>
        </div>
    </div>



    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      Reveal.initialize({
        width: 1400,
        height: 1000,
        progress: true,
        slideNumber: true,
        hash: true, 
        center: false,        
        plugins: [RevealHighlight]
      });
    </script>
  </body>
</html>